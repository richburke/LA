var $LA=function(){var r=function(r,t){var t=t||{};return t.TOLERANCE=1e-4,r.setTolerance=function(r){return t.TOLERANCE=r,this},r},t=function(e,n){var o,u,i,s;if(u={},u.a=[],e)if(Array.isArray(e))u.a=e;else{if(!Number.isInteger(e))throw Error("If supplied, the first parameter must be either a number or an array.");for(i=parseFloat(n)||0,s=0;e>s;++s)u.a.push(i)}return o={},o.toString=function(){return"["+u.a.toString()+"]"},o.get=function(r){if(r&&Number.isInteger(r)){if(1>r)throw new Error("The index must be greater than or equal to 1.");return u.a[r-1]}return u.a.slice()},o.make=function(r,e){var n=e.reduce(function(t,e){return t.concat(r*Math.cos(e))},[]);return t(n)},o.order=function(){return u.a.length},o.dimension=function(){return this.order()},o.magnitude=function(){var r=u.a.reduce(function(r,t){return r+t*t},0);return Math.sqrt(r)},o.length=function(){return this.magnitude()},o.distance=function(r){var t=u.a.reduce(function(t,e,n){return t+(e-r.get(n+1))*(e-r.get(n+1))},0);return Math.sqrt(t)},o.normalize=function(){var r,e=this.magnitude();return e<=u.TOLERANCE&&(e=1),r=u.a.reduce(function(r,t){var n=t/e;return Math.abs(n)<u.TOLERANCE&&(n=0),r.concat(n)},[]),t(r)},o.reverse=function(){var r=u.a.reduce(function(r,t){return r.concat(-t)},[]);return t(r)},o.add=function(r){var e;if(this.dimension()!==r.dimension())throw new Error("Vectors can only be added or subtracted with vectors of the same order.");return e=u.a.reduce(function(t,e,n){return t.concat(e+r.get(n+1))},[]),t(e)},o.subtract=function(r){return this.add(r.reverse())},o.scale=function(r){var e=u.a.reduce(function(t,e){return t.concat(e*r)},[]);return t(e)},o.scalarMultiply=function(r){return this.scale(r)},o.scalarDivide=function(r){return this.scale(1/r)},o.dot=function(r){var t;if(this.dimension()!==r.dimension())throw new Error("The dot product can only be taken on vectors of like dimension.");return t=u.a.reduce(function(t,e,n){return t+e*r.get(n+1)},0)},o.cross=function(r){var e=[];if(this.dimension()!==r.dimension())throw new Error("The cross product can only be taken on vectors of like dimension.");if(3!==this.dimension())throw new Error("The cross product of can only occur on vectors of 3 dimensions");return e.push(this.get(2)*r.get(3)-this.get(3)*r.get(2)),e.push(this.get(3)*r.get(1)-this.get(1)*r.get(3)),e.push(this.get(1)*r.get(2)-this.get(2)*r.get(1)),t(e)},o.transform=function(r){return r(this)},r(o,u)},e=function(n,o,u){function i(r,t){var n,o;return n=a.a.reduce(function(e,n,u){return o=n.reduce(function(e,n,o){return e.concat(t(n,r.get(u+1,o+1)))},[]),e.push(o),e},[]),e(n)}var s,a,c,f,h,m,l;if(a={},a.a=[],a.rows=0,a.columns=0,n)if(Array.isArray(n)){if(0!=n.length){if(!Array.isArray(n[0]))throw Error("If the first parameter is an array of some length, it must be an array of arrays.");if(a.rows=n.length,a.columns=n[0].length,l=n.every(function(r){return r.length==a.columns}),!l)throw Error("Each of the matrix's rows must be of the same length.")}a.a=n}else{if(!Number.isInteger(n))throw Error("The first parameter must be either a number or an array.");if(!Number.isInteger(o))throw Error("If supplied, the second parameter must be a number.");for(c=parseFloat(u)||0,a.rows=n,a.columns=o,h=0;h<a.rows;++h){for(f=[],m=0;m<a.columns;++m)f.push(c);a.a.push(f)}}return s={},s.toString=function(){var r=a.a.reduce(function(r,t,e){var n=0!==e?",\n[":"[";return n+=t.toString(),n+="]",r+n},"");return"["+r+"]"},s.numberOfRows=function(){return a.rows},s.numberOfColumns=function(){return a.columns},s.get=function(r,t){var e="Row and column indices must be greater than or equal to 1.",n="The requested element is outside the bounds of the matrix.";if(r&&t){if(1>r||1>t)throw new Error(e);if(r>this.numberOfRows()||t>this.numberOfColumns())throw new Error(n);return a.a[r-1][t-1]}if(r){if(1>r)throw new Error(e);if(r>this.numberOfRows())throw new Error(n);return a.a[r-1].slice()}if(t){if(1>t)throw new Error(e);if(r>this.numberOfColumns())throw new Error(n);return a.a.reduce(function(r,e){return r.concat(e[t-1])},[])}return a.a.slice()},s.asColumnVectors=function(r){var e,n=[];if(r&&Number.isInteger(r))return t(this.get(null,r));for(e=1;e<=this.numberOfColumns();++e)n.push(t(this.get(null,e)));return n},s.asRowVectors=function(r){return r&&Number.isInteger(r)?t(this.get(r)):a.a.reduce(function(r,e){return r.concat(t(e))},[])},s.transpose=function(){var r,t,n,o;for(n=[],t=0;t<a.columns;++t){for(o=[],r=0;r<a.rows;++r)o.push(this.get(r+1,t+1));n.push(o)}return e(n)},s.add=function(r){if(this.numberOfRows()!==r.numberOfRows()||this.numberOfColumns()!==r.numberOfColumns())throw new Error("Matrices can only be added or subtracted with matrices of the same order.");return i(r,function(r,t){return r+t})},s.subtract=function(r){if(this.numberOfRows()!==r.numberOfRows()||this.numberOfColumns()!==r.numberOfColumns())throw new Error("Matrices can only be added or subtracted with matrices of the same order.");return i(r,function(r,t){return r-t})},s.scale=function(r){var t,n;return t=a.a.reduce(function(t,e){return n=e.reduce(function(t,e){return t.concat(e*r)},[]),t.push(n),t},[]),e(t)},s.scalarMultiply=function(r){return this.scale(r)},s.scalarDivide=function(r){return this.scale(1/r)},s.vectorMultiply=function(r){var e,n;if(this.numberOfColumns()!==r.order())throw new Error("Matrix-vector multiplication can only occur when the order of the vector and the column number of the matrix are the same.");return e=a.a.reduce(function(t,e){return n=e.reduce(function(t,e,n){return t+e*r.get(n+1)},0),t.concat(n)},[]),t(e)},s.matrixMultiply=function(r){var t,n=this;if(this.numberOfColumns()!=r.numberOfRows())throw new Error("Matrix-matrix multiplication can only occur when the number of columns of this matrix is equal to the number of rows of the supplied matrix.");return t=r.asColumnVectors().reduce(function(r,t){return r.push(n.vectorMultiply(t).get()),r},[]),e(t).transpose()},r(s,a)};return{vector:function(r,e){return t(r,e)},matrix:function(r,t,n){return e(r,t,n)}}}();